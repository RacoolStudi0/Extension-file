var ke=Object.defineProperty;var Le=(I,L,E)=>L in I?ke(I,L,{enumerable:!0,configurable:!0,writable:!0,value:E}):I[L]=E;var v=(I,L,E)=>Le(I,typeof L!="symbol"?L+"":L,E);(function(){"use strict";function I(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var L={exports:{}},E;function te(){return E||(E=1,function(i){var r=function(e,t){return this instanceof r?e instanceof r?e:((e=typeof e=="string"?this.select(e,t):e)&&e.nodeName&&(e=[e]),void(this.nodes=this.slice(e))):new r(e,t)};r.prototype={get length(){return this.nodes.length}},r.prototype.nodes=[],r.prototype.addClass=function(){return this.eacharg(arguments,function(e,t){e.classList.add(t)})},r.prototype.adjacent=function(e,t,n){return typeof t=="number"&&(t=t===0?[]:new Array(t).join().split(",").map(Number.call,Number)),this.each(function(s,o){var c=document.createDocumentFragment();r(t||{}).map(function(A,g){return g=typeof e=="function"?e.call(this,A,g,s,o):e,typeof g=="string"?this.generate(g):r(g)}).each(function(A){this.isInPage(A)?c.appendChild(r(A).clone().first()):c.appendChild(A)}),n.call(this,s,c)})},r.prototype.after=function(e,t){return this.adjacent(e,t,function(n,s){n.parentNode.insertBefore(s,n.nextSibling)})},r.prototype.append=function(e,t){return this.adjacent(e,t,function(n,s){n.appendChild(s)})},r.prototype.args=function(e,t,n){return(e=typeof(e=typeof e=="function"?e(t,n):e)!="string"?this.slice(e).map(this.str(t,n)):e).toString().split(/[\s,]+/).filter(function(s){return s.length})},r.prototype.array=function(e){var t=this;return this.nodes.reduce(function(n,s,o){var c;return e?(c=typeof(c=(c=e.call(t,s,o))||!1)=="string"?r(c):c)instanceof r&&(c=c.nodes):c=s.innerHTML,n.concat(c!==!1?c:[])},[])},r.prototype.attr=function(e,t,n){return n=n?"data-":"",this.pairs(e,t,function(s,o){return s.getAttribute(n+o)},function(s,o,c){c?s.setAttribute(n+o,c):s.removeAttribute(n+o)})},r.prototype.before=function(e,t){return this.adjacent(e,t,function(n,s){n.parentNode.insertBefore(s,n)})},r.prototype.children=function(e){return this.map(function(t){return this.slice(t.children)}).filter(e)},r.prototype.clone=function(){return this.map(function(e,t){var n=e.cloneNode(!0),s=this.getAll(n);return this.getAll(e).each(function(o,c){for(var A in this.mirror)this.mirror[A]&&this.mirror[A](o,s.nodes[c])}),n})},r.prototype.getAll=function(e){return r([e].concat(r("*",e).nodes))},r.prototype.mirror={},r.prototype.mirror.events=function(e,t){if(e._e)for(var n in e._e)e._e[n].forEach(function(s){r(t).on(n,s.callback)})},r.prototype.mirror.select=function(e,t){r(e).is("select")&&(t.value=e.value)},r.prototype.mirror.textarea=function(e,t){r(e).is("textarea")&&(t.value=e.value)},r.prototype.closest=function(e){return this.map(function(t){do if(r(t).is(e))return t;while((t=t.parentNode)&&t!==document)})},r.prototype.data=function(e,t){return this.attr(e,t,!0)},r.prototype.each=function(e){return this.nodes.forEach(e.bind(this)),this},r.prototype.eacharg=function(e,t){return this.each(function(n,s){this.args(e,n,s).forEach(function(o){t.call(this,n,o)},this)})},r.prototype.empty=function(){return this.each(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)})},r.prototype.filter=function(e){var t=e instanceof r?function(n){return e.nodes.indexOf(n)!==-1}:typeof e=="function"?e:function(n){return n.matches=n.matches||n.msMatchesSelector||n.webkitMatchesSelector,n.matches(e||"*")};return r(this.nodes.filter(t))},r.prototype.find=function(e){return this.map(function(t){return r(e||"*",t)})},r.prototype.first=function(){return this.nodes[0]||!1},r.prototype.generate=function(e){return/^\s*<tr[> ]/.test(e)?r(document.createElement("table")).html(e).children().children().nodes:/^\s*<t(h|d)[> ]/.test(e)?r(document.createElement("table")).html(e).children().children().children().nodes:/^\s*</.test(e)?r(document.createElement("div")).html(e).children().nodes:document.createTextNode(e)},r.prototype.handle=function(){var e=this.slice(arguments).map(function(t){return typeof t=="function"?function(n){n.preventDefault(),t.apply(this,arguments)}:t},this);return this.on.apply(this,e)},r.prototype.hasClass=function(){return this.is("."+this.args(arguments).join("."))},r.prototype.html=function(e){return e===void 0?this.first().innerHTML||"":this.each(function(t){t.innerHTML=e})},r.prototype.is=function(e){return 0<this.filter(e).length},r.prototype.isInPage=function(e){return e!==document.body&&document.body.contains(e)},r.prototype.last=function(){return this.nodes[this.length-1]||!1},r.prototype.map=function(e){return e?r(this.array(e)).unique():this},r.prototype.not=function(e){return this.filter(function(t){return!r(t).is(e||!0)})},r.prototype.off=function(e,t,n){var s=t==null&&n==null,o=null,c=t;return typeof t=="string"&&(o=t,c=n),this.eacharg(e,function(A,g){r(A._e?A._e[g]:[]).each(function(b){(s||b.orig_callback===c&&b.selector===o)&&A.removeEventListener(g,b.callback)})})},r.prototype.on=function(e,t,n){function s(g,b){try{Object.defineProperty(g,"currentTarget",{value:b,configurable:!0})}catch{}}var o=null,c=t;typeof t=="string"&&(o=t,c=n,t=function(g){var b=arguments;r(g.currentTarget).find(o).each(function(P){var D;P.contains(g.target)&&(D=g.currentTarget,s(g,P),n.apply(P,b),s(g,D))})});function A(g){return t.apply(this,[g].concat(g.detail||[]))}return this.eacharg(e,function(g,b){g.addEventListener(b,A),g._e=g._e||{},g._e[b]=g._e[b]||[],g._e[b].push({callback:A,orig_callback:c,selector:o})})},r.prototype.pairs=function(e,t,n,s){var o;return t!==void 0&&(o=e,(e={})[o]=t),typeof e=="object"?this.each(function(c,A){for(var g in e)typeof e[g]=="function"?s(c,g,e[g](c,A)):s(c,g,e[g])}):this.length?n(this.first(),e):""},r.prototype.param=function(e){return Object.keys(e).map((function(t){return this.uri(t)+"="+this.uri(e[t])}).bind(this)).join("&")},r.prototype.parent=function(e){return this.map(function(t){return t.parentNode}).filter(e)},r.prototype.prepend=function(e,t){return this.adjacent(e,t,function(n,s){n.insertBefore(s,n.firstChild)})},r.prototype.remove=function(){return this.each(function(e){e.parentNode&&e.parentNode.removeChild(e)})},r.prototype.removeClass=function(){return this.eacharg(arguments,function(e,t){e.classList.remove(t)})},r.prototype.replace=function(e,t){var n=[];return this.adjacent(e,t,function(s,o){n=n.concat(this.slice(o.children)),s.parentNode.replaceChild(o,s)}),r(n)},r.prototype.scroll=function(){var e=this.first();return e&&e.scrollIntoView({behavior:"smooth"}),this},r.prototype.select=function(e,t){return e=e.replace(/^\s*/,"").replace(/\s*$/,""),/^</.test(e)?r().generate(e):(t||document).querySelectorAll(e)},r.prototype.serialize=function(){var e=this;return this.slice(this.first().elements).reduce(function(t,n){return!n.name||n.disabled||n.type==="file"||/(checkbox|radio)/.test(n.type)&&!n.checked?t:n.type==="select-multiple"?(r(n.options).each(function(s){s.selected&&(t+="&"+e.uri(n.name)+"="+e.uri(s.value))}),t):t+"&"+e.uri(n.name)+"="+e.uri(n.value)},"").slice(1)},r.prototype.siblings=function(e){return this.parent().children(e).not(this)},r.prototype.size=function(){var e=this.first();return e?e.getBoundingClientRect():null},r.prototype.slice=function(e){return e&&e.length!==0&&typeof e!="string"&&e.toString()!=="[object Function]"?e.length?[].slice.call(e.nodes||e):[e]:[]},r.prototype.str=function(e,t){return function(n){return typeof n=="function"?n.call(this,e,t):n.toString()}},r.prototype.text=function(e){return e===void 0?this.first().textContent||"":this.each(function(t){t.textContent=e})},r.prototype.toggleClass=function(e,t){return!!t===t?this[t?"addClass":"removeClass"](e):this.eacharg(e,function(n,s){n.classList.toggle(s)})},r.prototype.trigger=function(e){var t=this.slice(arguments).slice(1);return this.eacharg(e,function(n,s){var o,c={bubbles:!0,cancelable:!0,detail:t};try{o=new window.CustomEvent(s,c)}catch{(o=document.createEvent("CustomEvent")).initCustomEvent(s,!0,!0,t)}n.dispatchEvent(o)})},r.prototype.unique=function(){return r(this.nodes.reduce(function(e,t){return t!=null&&t!==!1&&e.indexOf(t)===-1?e.concat(t):e},[]))},r.prototype.uri=function(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},r.prototype.wrap=function(e){return this.map(function(t){return r(e).each(function(n){(function(s){for(;s.firstElementChild;)s=s.firstElementChild;return r(s)})(n).append(t.cloneNode(!0)),t.parentNode.replaceChild(n,t)})})},i.exports&&(i.exports=r,i.exports.u=r)}(L)),L.exports}var re=te();const h=I(re),_='<svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.0714 2.63204C5.47007 1.46537 7.08207 1.43004 7.55474 2.52604L7.59474 2.63271L8.13274 4.20604C8.25603 4.56686 8.45527 4.89705 8.71702 5.17432C8.97877 5.4516 9.29694 5.66952 9.65007 5.81337L9.79474 5.86737L11.3681 6.40471C12.5347 6.80337 12.5701 8.41537 11.4747 8.88804L11.3681 8.92804L9.79474 9.46604C9.43379 9.58925 9.10348 9.78846 8.82608 10.0502C8.54869 10.312 8.33067 10.6302 8.18674 10.9834L8.13274 11.1274L7.5954 12.7014C7.19674 13.868 5.58474 13.9034 5.11274 12.808L5.0714 12.7014L4.53407 11.128C4.41086 10.7671 4.21165 10.4368 3.9499 10.1594C3.68814 9.88199 3.36993 9.66397 3.01674 9.52004L2.87274 9.46604L1.2994 8.92871C0.132069 8.53004 0.0967363 6.91804 1.19274 6.44604L1.2994 6.40471L2.87274 5.86737C3.23356 5.74408 3.56374 5.54484 3.84102 5.28309C4.11829 5.02134 4.33621 4.70317 4.48007 4.35004L4.53407 4.20604L5.0714 2.63204ZM11.6667 0.333374C11.7915 0.333374 11.9137 0.36836 12.0195 0.434355C12.1253 0.500351 12.2105 0.594709 12.2654 0.706707L12.2974 0.784708L12.5307 1.46871L13.2154 1.70204C13.3404 1.7445 13.45 1.82312 13.5302 1.92792C13.6105 2.03272 13.6578 2.15899 13.6663 2.29072C13.6747 2.42246 13.6438 2.55373 13.5775 2.6679C13.5113 2.78207 13.4126 2.874 13.2941 2.93204L13.2154 2.96404L12.5314 3.19737L12.2981 3.88204C12.2555 4.00699 12.1769 4.11651 12.072 4.1967C11.9672 4.2769 11.8409 4.32417 11.7092 4.33252C11.5774 4.34088 11.4462 4.30994 11.3321 4.24363C11.2179 4.17732 11.1261 4.07862 11.0681 3.96004L11.0361 3.88204L10.8027 3.19804L10.1181 2.96471C9.99308 2.92224 9.88351 2.84363 9.80325 2.73883C9.72299 2.63403 9.67564 2.50776 9.66722 2.37603C9.65879 2.24429 9.68967 2.11302 9.75592 1.99885C9.82218 1.88468 9.92084 1.79275 10.0394 1.73471L10.1181 1.70271L10.8021 1.46937L11.0354 0.784708C11.0804 0.652991 11.1654 0.538646 11.2786 0.457707C11.3918 0.376767 11.5276 0.333291 11.6667 0.333374Z" fill="#652FE2"/></svg>',m="bep51c8d86833613f1041e3c3b463f2eb1e";async function ne(i,r,e){const t=z(),n=se();return await(await fetch(`https://contributor.stock.adobe.com/en/uploads?limit=${r}&page=${i}`,{method:"GET",headers:{"Content-Type":"application/json","Csrf-Token":e,Accept:"application/json","x-newrelic-id":t,"x-request-id":n,"x-requested-with":"XMLHTTPRequest"}})).json()}function z(i=20){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";let e="";for(let t=0;t<i;t++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}function se(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const r=Math.random()*16|0;return(i==="x"?r:r&3|8).toString(16)})}var q={exports:{}},ie=q.exports,J;function oe(){return J||(J=1,function(i,r){(function(e,t){t(i)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ie,function(e){var t,n;if(!((n=(t=globalThis.chrome)==null?void 0:t.runtime)!=null&&n.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const s="The message port closed before a response was received.",o=c=>{const A={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(A).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class g extends WeakMap{constructor(l,p=void 0){super(p),this.createItem=l}get(l){return this.has(l)||this.set(l,this.createItem(l)),super.get(l)}}const b=a=>a&&typeof a=="object"&&typeof a.then=="function",P=(a,l)=>(...p)=>{c.runtime.lastError?a.reject(new Error(c.runtime.lastError.message)):l.singleCallbackArg||p.length<=1&&l.singleCallbackArg!==!1?a.resolve(p[0]):a.resolve(p)},D=a=>a==1?"argument":"arguments",be=(a,l)=>function(d,...x){if(x.length<l.minArgs)throw new Error(`Expected at least ${l.minArgs} ${D(l.minArgs)} for ${a}(), got ${x.length}`);if(x.length>l.maxArgs)throw new Error(`Expected at most ${l.maxArgs} ${D(l.maxArgs)} for ${a}(), got ${x.length}`);return new Promise((w,C)=>{if(l.fallbackToNoCallback)try{d[a](...x,P({resolve:w,reject:C},l))}catch(u){console.warn(`${a} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,u),d[a](...x),l.fallbackToNoCallback=!1,l.noCallback=!0,w()}else l.noCallback?(d[a](...x),w()):d[a](...x,P({resolve:w,reject:C},l))})},O=(a,l,p)=>new Proxy(l,{apply(d,x,w){return p.call(x,a,...w)}});let F=Function.call.bind(Object.prototype.hasOwnProperty);const U=(a,l={},p={})=>{let d=Object.create(null),x={has(C,u){return u in a||u in d},get(C,u,k){if(u in d)return d[u];if(!(u in a))return;let f=a[u];if(typeof f=="function")if(typeof l[u]=="function")f=O(a,a[u],l[u]);else if(F(p,u)){let S=be(u,p[u]);f=O(a,a[u],S)}else f=f.bind(a);else if(typeof f=="object"&&f!==null&&(F(l,u)||F(p,u)))f=U(f,l[u],p[u]);else if(F(p,"*"))f=U(f,l[u],p["*"]);else return Object.defineProperty(d,u,{configurable:!0,enumerable:!0,get(){return a[u]},set(S){a[u]=S}}),f;return d[u]=f,f},set(C,u,k,f){return u in d?d[u]=k:a[u]=k,!0},defineProperty(C,u,k){return Reflect.defineProperty(d,u,k)},deleteProperty(C,u){return Reflect.deleteProperty(d,u)}},w=Object.create(a);return new Proxy(w,x)},K=a=>({addListener(l,p,...d){l.addListener(a.get(p),...d)},hasListener(l,p){return l.hasListener(a.get(p))},removeListener(l,p){l.removeListener(a.get(p))}}),ve=new g(a=>typeof a!="function"?a:function(p){const d=U(p,{},{getContent:{minArgs:0,maxArgs:0}});a(d)}),Q=new g(a=>typeof a!="function"?a:function(p,d,x){let w=!1,C,u=new Promise(R=>{C=function(T){w=!0,R(T)}}),k;try{k=a(p,d,C)}catch(R){k=Promise.reject(R)}const f=k!==!0&&b(k);if(k!==!0&&!f&&!w)return!1;const S=R=>{R.then(T=>{x(T)},T=>{let Z;T&&(T instanceof Error||typeof T.message=="string")?Z=T.message:Z="An unexpected error occurred",x({__mozWebExtensionPolyfillReject__:!0,message:Z})}).catch(T=>{console.error("Failed to send onMessage rejected reply",T)})};return S(f?k:u),!0}),we=({reject:a,resolve:l},p)=>{c.runtime.lastError?c.runtime.lastError.message===s?l():a(new Error(c.runtime.lastError.message)):p&&p.__mozWebExtensionPolyfillReject__?a(new Error(p.message)):l(p)},ee=(a,l,p,...d)=>{if(d.length<l.minArgs)throw new Error(`Expected at least ${l.minArgs} ${D(l.minArgs)} for ${a}(), got ${d.length}`);if(d.length>l.maxArgs)throw new Error(`Expected at most ${l.maxArgs} ${D(l.maxArgs)} for ${a}(), got ${d.length}`);return new Promise((x,w)=>{const C=we.bind(null,{resolve:x,reject:w});d.push(C),p.sendMessage(...d)})},Ce={devtools:{network:{onRequestFinished:K(ve)}},runtime:{onMessage:K(Q),onMessageExternal:K(Q),sendMessage:ee.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:ee.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},X={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return A.privacy={network:{"*":X},services:{"*":X},websites:{"*":X}},U(c,Ce,A)};e.exports=o(chrome)}else e.exports=globalThis.browser})}(q)),q.exports}var ae=oe();const V=I(ae),Y=(i,r="",e="")=>h(`<button id="${i}" class="${r}">${e}</button>`),le=i=>h(`<div id="${i}"></div>`);function ce(i,r,e){h("#"+m+"-info-popup").remove();const t=h(`
    <div id="${m}-info-popup">
        <h1 id="${m}-info-popup-title">Results</h1>
        <div class="${m}-info-popup-block-header">
            <div class="${m}-info-popup-block-header-title">Title</div>
            <button class="mypluginidCopy" data-value="${(i==null?void 0:i.title)||""}" title="Copy">Copy</button>
        </div>
        <textarea class="${m}-textarea" id="${m}-mypluginidtitle" cols="30" rows="10">${(i==null?void 0:i.title)||""}</textarea>
        <div class="${m}-info-popup-block-header description">
            <div class="${m}-info-popup-block-header-title">Description</div>
            <button class="mypluginidCopy" data-value="${(i==null?void 0:i.description)||""}" title="Copy">Copy</button>
        </div>
        <textarea class="${m}-textarea" id="${m}-mypluginidtitle" cols="30" rows="10">${(i==null?void 0:i.description)||""}</textarea>
        <div class="${m}-info-popup-block-header keywords">
            <div class="${m}-info-popup-block-header-title">Keyword</div>
            <button class="mypluginidCopy" data-value="${(i==null?void 0:i.keywords)||""}" title="Copy">Copy</button>
        </div>
        <textarea class="${m}-textarea keywords" id="${m}-mypluginidtitle" cols="30" rows="10">${(i==null?void 0:i.keywords.join(", "))||""}</textarea>
        <div id="${m}-image">
            <img src="${(i==null?void 0:i.img)||""}" alt="">
        </div>
        <div id="${m}-buttons-list">
            <input type="button" id="${m}-mypluginidclose" value="Close" class="${m}-button ${m}-bg-red">
            <input type="button" id="${m}-mypluginidsave" value="Save" class="${m}-button">

        </div>
    </div>
    `);h("body").append(t),h(".mypluginidCopy").each(s=>{let o=h(s);o.on("click",()=>{ge(o.data("value"))})}),h("#"+m+"-mypluginidclose").on("click",()=>{t.remove()});const n=h("#"+m+"-mypluginidsave");n.on("click",async()=>{n.nodes[0].value="Saving...",await e(),n.nodes[0].value="Saved"})}function ge(i){if(navigator.clipboard&&navigator.clipboard.writeText)return navigator.clipboard.writeText(i);{const r=document.createElement("textarea");r.value=i,document.body.appendChild(r),r.focus(),r.select();try{return document.execCommand("copy")}catch(e){return console.error("Unable to copy to clipboard",e),!1}finally{document.body.removeChild(r)}}}class M{constructor(){v(this,"initImgAiButtonsStarted",!1);v(this,"contributor","");v(this,"AiData",Array());v(this,"itemList",{});v(this,"checkInterval",null);if(new.target===M)throw new Error("Cannot instantiate AbstractShape directly.")}getPageData(r,e){throw new Error("Method 'calculateArea()' must be implemented by subclasses.")}getPageDataFromUrl(r){throw new Error("Method 'getPageDataFromUrl()' must be implemented by subclasses.")}saveImgData(r){throw new Error("Method 'saveImgData()' must be implemented by subclasses.")}getItemList(){throw new Error("Method 'getItemList()' must be implemented by subclasses.")}getButtonList(){throw new Error("Method 'getButtonList()' must be implemented by subclasses.")}getAIData(r,e,t){return new Promise((n,s)=>{V.runtime.sendMessage({action:"fetchAIData",imageUrl:r,identificator:e,contributor:this.contributor}).then(async o=>{o&&o.error?s(o):o?(this.AiData[t]={title:o.title,description:o.description,keywords:o.keywords,img:r,index:t},await this.saveImgData(t),n(o)):s({error:!0,message:"No data or error received from background script."})})})}getGeneratedData(){this.itemList={};const r=Array();return console.log("getGeneratedData"),this.getItemList().each(e=>{r.push(h(e).data("identificator"))}),new Promise((e,t)=>{if(!r.length){e({error:!0,message:"Identifiers is empty."});return}V.runtime.sendMessage({action:"fetchGeneratedAIData",identifiers:r,contributor:this.contributor}).then(async n=>{n&&n.error?t(n):n&&n.data?(console.log("response.data",n.data),n.data.map(s=>{this.AiData[s.index]=s}),e(this.AiData)):t({error:!0,message:"No data or error received from background script."})})})}initImgAiButtons(){return this.getGeneratedData().then(()=>(console.log("initImgAiButtons"),this.getItemList().each((r,e)=>{const t=h(r);if(t.data("inited"))return;let n="0",s="Get AI";typeof this.AiData[e]<"u"&&(n="2",s="Show AI");const o=Y("",`${m}-ai-button`,`<span>${_} ${s} </span>`);o.attr({"data-index":e.toString(),"data-loading":n,"data-img":t.attr("src"),"data-identificator":t.data("identificator")}),o.on("click",c=>{c.preventDefault(),this.onAiButtonClick(o)}),t.after(o),t.data("inited","1")})))}async onAiButtonClick(r){const e=Number(r.data("index"));switch(r.data("loading")){case"1":return"loading";case"2":const n=this.AiData[e];return ce({title:n.title,description:n.description,keywords:n.keywords,img:r.data("img")},e,()=>this.saveImgData(e)),"ready";case"0":return await this.processNewAiRequest(r,e);default:return"ready"}}async processNewAiRequest(r,e){try{r.data("loading","1"),r.html(`<span>${_} Working...</span>`);const t=await this.getAIData(r.data("img"),r.data("identificator"),e);if(!(t!=null&&t.error))return r.html(`<span>${_} Show AI</span>`),r.data("loading","2"),"ready";throw new Error(t.message)}catch(t){throw console.error(t),r.data("loading","0"),r.html(`<span>${_} Get AI</span>`),t}}resetImgAiButtons(){let r=0;const e=10,t=1e3;this.AiData=[],this.itemList={},this.checkInterval&&clearInterval(this.checkInterval);const n=setInterval(()=>{r++,console.log("resetImgAiButtons");const s=this.getItemList()&&!!this.getItemList().length,o=this.getButtonList()&&!!this.getButtonList().length;!this.initImgAiButtonsStarted&&s&&!o?(this.initImgAiButtonsStarted=!0,console.log("Condition met: img exists and button does not. Running initImgAiButtons()."),this.initImgAiButtons().then(()=>{this.initImgAiButtonsStarted=!1})):r>=e?(console.log("Max attempts reached. Condition not met. Stopping interval."),clearInterval(n)):console.log("Attempts "+r)},t)}}const $=class $ extends M{constructor(){super();v(this,"csrfToken");v(this,"contributor","AdobeService");const t=document.documentElement.innerHTML.match(/window\.__react_context__\s*=\s*"([^"]+)"/);let n="";t&&(n=t[1]);const s=decodeURIComponent(n),o=JSON.parse(s);this.csrfToken=o.csrfToken,console.log("csrfToken",this.csrfToken)}getPageData(e,t){return ne(e,t,this.csrfToken).then(n=>($.pageData=n.content,$.pageData))}getPageDataFromUrl(e){const t=new URL(e),n=+(t.searchParams.get("page")??0),s=+(t.searchParams.get("limit")??0);this.getPageData(n,s).then(o=>{console.log(123,o)})}async saveImgData(e){const t=$.pageData[e],n=[{category:t.category,contentType:t.contentType,contentUuid:t.uuid,id:t.id,isIllustrative:t.isIllustrative,isGenTech:t.isGenTech,isGenTechPropertyRelease:t.isGenTechPropertyRelease,isIcon:t.isIcon,iconType:t.iconType,premiumLevelId:t.premiumLevelId,keywords:this.AiData[e].keywords,language:t.language,releases:t.releases,hasReleases:t.hasReleases,status:t.status,title:this.AiData[e].title,isIncludedInSubmission:t.isIncludedInSubmission}],s=z();try{const o=await fetch("https://contributor.stock.adobe.com/en/indexation/save?m=1",{method:"POST",headers:{"Content-Type":"application/json","csrf-token":this.csrfToken,"X-NewRelic-ID":s,"X-Requested-With":"XMLHTTPRequest"},body:JSON.stringify(n)});if(!o.ok){const c=await o.json();throw console.error("Phototag API error:",c),new Error(`Phototag API request failed: ${o.status} - ${JSON.stringify(c)}`)}return await o.json()}catch(o){throw console.error("Error calling Phototag API:",o),o}}getItemList(){return this.itemList.length||(this.itemList=h(".upload-tile__wrapper > img"),this.itemList.map(e=>{const t=h(e),s=new URL(t.attr("src")).pathname.split("/").pop();t.data("identificator",s)})),this.itemList}getButtonList(){return h(".upload-tile__wrapper > button")}};v($,"pageData",Array());let G=$;async function ue(i,r){return await(await fetch(`https://contributor.freepik.com/xhr/preitem/tags-revision?limit=${r}&page=${i}&sort=with-errors-first
`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json, text/plain, */*","x-requested-with":"XMLHttpRequest"}})).json()}const B=class B extends M{constructor(){super(...arguments);v(this,"contributor","FreepikService");v(this,"AiData",Array())}getPageData(e,t){return ue(e,t).then(n=>(B.pageData=n.data,B.pageData))}getPageDataFromUrl(e){const n=new URL(e).pathname.split("/"),o=+(n[n.length-1]??2);this.getPageData(o,40)}async saveImgData(e){const n={preitems:[{aiModel:null,aiPrompt:null,id:B.pageData[e].id,tags:this.AiData[e].keywords,title:this.AiData[e].title}]};try{const s=await fetch("https://contributor.freepik.com/xhr/preitem/tags-update",{method:"POST",headers:{"Content-Type":"application/json","x-requested-with":"XMLHttpRequest"},body:JSON.stringify(n)});if(!s.ok){const o=await s.json();throw console.error("Phototag API error:",o),new Error(`Phototag API request failed: ${s.status} - ${JSON.stringify(o)}`)}return await s.json()}catch(s){throw console.error("Error calling Phototag API:",s),s}}getItemList(){return console.log("getItemList",this.itemList.length),this.itemList.length||(this.itemList=h(".catalog__item .thumbnail > img[src]"),this.itemList.map(e=>{const t=h(e);t.data("identificator",t.closest(".catalog__item.relative").data("id"))})),this.itemList}getButtonList(){return h(".catalog__item .thumbnail > button")}};v(B,"pageData",Array());let H=B;class W{static getContributorType(){const r=window.location.href;return r.includes("contributor.stock.adobe.com")?new this.ADOBE_STOCK:r.includes("contributor.freepik.com")?new this.FREEPIK:new M}}v(W,"ADOBE_STOCK",G),v(W,"FREEPIK",H);const j=10;let N=!1;const y=W.getContributorType(),me=i=>{y==null||y.getPageDataFromUrl(i),y==null||y.resetImgAiButtons()},pe=()=>{const i=`
        <div id="${m}-alert-popup-container">
            <div id="${m}-alert-popup">
                <div id="${m}-alert-icon-reload"></div>
                <h1>Refresh your page</h1>
                <p>Your images are ready!</p>
                <button id="${m}-alert-popup-button-reload">Refresh now</button>
            </div>
        </div>
    `;h("body").append(i),h(`#${m}-alert-popup-button-reload`).on("click",()=>window.location.reload())},de=async(i,r,e)=>{const n=i.slice(r,r+j).map(s=>y.onAiButtonClick(s));try{await Promise.all(n),e.html(`<span>Batch ${Math.floor(r/j)+1} completed.</span>`)}catch(s){console.error("Error in batch processing:",s)}};async function he(i){if(i.data("loading")!=="0")return;i.data("loading","1"),N=!1;const r=Array();h(`.${m}-ai-button`).each(e=>{const t=h(e);t.data("loading")==="0"&&r.push(t)}),r.length&&await Ae(i,r),i.data("loading","0"),fe(i)}async function Ae(i,r){i.html("<span>Generating AI Tags...</span>");for(let e=0;e<r.length&&!N;e+=j)await de(r,e,i)}function fe(i){N?(i.html("<span>Bulk AI (Stopped)</span>"),console.log("Bulk AI generation stopped by user.")):(i.html("<span>Bulk AI</span>"),console.log("All batches completed."),pe()),N=!1}function xe(){y==null||y.getPageDataFromUrl(document.location.href),y==null||y.resetImgAiButtons(),window.navigation.addEventListener("navigate",i=>{me(i.destination.url)})}function ye(){if(!y){console.log("ContributorService invalid!");return}const i=Y(`${m}-bulk-generator`,"","Generate all"),r=le(`${m}-bulk-generator-container`);i.data("loading","0"),i.on("click",async e=>{if(e.preventDefault(),i.data("loading")==="1"){N=!0,i.html("<span>Stopping...</span>");return}await he(i)}),r.append(i),h("body").append(r),xe()}ye()})();
